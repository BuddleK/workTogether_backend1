<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="newsList">
   <!-- 일반 뉴스 전체 불러오기 쿼리-->
   <select id="getNewsList" parameterType="map" resultType="NewsListDTO">
   		<![CDATA[
		SELECT * FROM (
	SELECT ROWNUM AS rnum, subquery.*
		FROM (
		select news_number AS newsNumber, news_title AS newsTitle,
		news_link_url AS newsLinkUrl,news_created_date AS newsCreatedDate
		from tbl_news
		order by news_created_date desc
		) subquery
	) WHERE rnum BETWEEN #{startRow} AND #{endRow}	
	]]>
   </select>
   
   <!-- 전체 리스트 개수 -->
	<select id="getTotal" resultType="int">
		SELECT COUNT(news_number)
		FROM tbl_news
	</select>
   
   <!-- 배너 뉴스 전체 불러오기 쿼리 -->
   <select id="getNewsMain" resultType="NewsMainDTO">
		SELECT ROWNUM AS rnum, subquery.*
		FROM (SELECT banner_news_number, banner_title, banner_content, banner_link_url, banner_files_path
		FROM TBL_NEWS_BANNERS b JOIN TBL_FILES_BANNER f ON BANNER_FILES_NUMBER = BANNER_FILES_NUMBER ORDER BY b.BANNER_CREATED_DATE DESC
		) subquery
   </select>
</mapper>